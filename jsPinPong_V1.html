<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
<!--    <script defer src="./index.js"></script>-->
</head>
<body>
    <script>
        // ì ìˆ˜íŒ(scoreBoard) ìƒì„± ë° ìŠ¤íƒ€ì¼
        let scoreBoard = document.createElement('div');
        scoreBoard.style.position = 'fixed';
        scoreBoard.style.top = '10px';
        scoreBoard.style.left = '50%';
        scoreBoard.style.transform = 'translateX(-50%)';
        scoreBoard.style.fontSize = '2em';
        scoreBoard.style.fontWeight = 'bold';
        scoreBoard.style.color = '#222';
        scoreBoard.style.background = 'rgba(255,255,255,0.8)';
        scoreBoard.style.padding = '10px 30px';
        scoreBoard.style.borderRadius = '15px';
        scoreBoard.style.zIndex = 1000;
        document.body.appendChild(scoreBoard);

        // ì ìˆ˜ ë³€ìˆ˜
        let redScore = 0;
        let blackScore = 0;

        // ì ìˆ˜íŒ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateScore() {
            scoreBoard.innerHTML = `ğŸŸ¥ Red: ${redScore} &nbsp;&nbsp;|&nbsp;&nbsp; â¬› Black: ${blackScore}`;
        }
        updateScore();

        // í”Œë ˆì´ì–´ div ìƒì„± ë° ìŠ¤íƒ€ì¼ (red)
        let a = document.createElement('div');
        a.style.width = '300px';
        a.style.height = '10px';
        a.style.border = '1px solid black';
        a.style.backgroundColor = 'red';
        a.style.position = 'absolute';
        // xì¶• ì •ê°€ìš´ë°ì—ì„œ ì‹œì‘
        a.style.left = (window.innerWidth / 2 - 150) + 'px'; // 150 = 300/2
        a.style.top = '1100px'; // í™”ë©´ ì•„ë˜ìª½
        a.tabIndex = 0;
        document.body.appendChild(a);
        a.focus();

        // ì»´í“¨í„° div ìƒì„± ë° ìŠ¤íƒ€ì¼ (black)
        let black = document.createElement('div');
        black.style.width = '300px';
        black.style.height = '10px';
        black.style.border = '1px solid black';
        black.style.backgroundColor = 'black';
        black.style.position = 'absolute';
        black.style.left = '200px';
        black.style.top = '50px'; // í™”ë©´ ìœ„ìª½
        document.body.appendChild(black);

        // blue div(b) ìƒì„± ë° ìŠ¤íƒ€ì¼
        let b = document.createElement('div');
        b.style.width = '300px';
        b.style.height = '10px';
        b.style.border = '1px solid black';
        b.style.backgroundColor = 'blue';
        b.style.position = 'absolute';
        b.style.left = '0px';
        b.style.top = '200px';
        document.body.appendChild(b);

        // green div(g) ìƒì„± ë° ìŠ¤íƒ€ì¼
        let g = document.createElement('div');
        g.style.width = '300px';
        g.style.height = '10px';
        g.style.border = '1px solid black';
        g.style.backgroundColor = 'green';
        g.style.position = 'absolute';
        const divWidth = 300;
        g.style.left = (window.innerWidth - divWidth) + 'px';
        g.style.top = '350px';
        document.body.appendChild(g);

        // yellow div(y) ìƒì„± ë° ìŠ¤íƒ€ì¼
        let y = document.createElement('div');
        y.style.width = '300px';
        y.style.height = '10px';
        y.style.border = '1px solid black';
        y.style.backgroundColor = 'yellow';
        y.style.position = 'absolute';
        y.style.left = '0px';
        y.style.top = '500px';
        document.body.appendChild(y);

        // orange div(o) ìƒì„± ë° ìŠ¤íƒ€ì¼
        let o = document.createElement('div');
        o.style.width = '300px';
        o.style.height = '10px';
        o.style.border = '1px solid black';
        o.style.backgroundColor = 'orange';
        o.style.position = 'absolute';
        o.style.left = (window.innerWidth - divWidth) + 'px';
        o.style.top = '650px';
        document.body.appendChild(o);

        // ê° divì˜ ìœ„ì¹˜ ë³€ìˆ˜
        let bX = 0;
        let gX = window.innerWidth - divWidth;
        let yX = 0;
        let oX = window.innerWidth - divWidth;

        // ê° ìŒì˜ ì´ë™ ì†ë„
        let dX_bg = 4;   // blue-green ìŒ
        let dX_yo = 6;   // yellow-orange ìŒ

        // blue-green ìŒ ì´ë™
        function moveBG() {
            const winW = window.innerWidth;
            bX += dX_bg;
            gX -= dX_bg;

            if (bX <= 0) {
                bX = 0;
                dX_bg *= -1;
            }
            if (bX + divWidth >= winW) {
                bX = winW - divWidth;
                dX_bg *= -1;
            }

            b.style.left = bX + 'px';
            g.style.left = gX + 'px';

            requestAnimationFrame(moveBG);
        }
        moveBG();

        // yellow-orange ìŒ ì´ë™ (ê²½ê³„ ë³´ì • ì™„ì „ ì ìš©)
        function moveYO() {
            const winW = window.innerWidth;
            yX += dX_yo;
            oX -= dX_yo;

            // yellow div (ì™¼ìª½/ì˜¤ë¥¸ìª½ ë²½ ë³´ì •)
            if (yX <= 0) {
                yX = 0;
                dX_yo *= -1;
            }
            if (yX + divWidth >= winW) {
                yX = winW - divWidth;
                dX_yo *= -1;
            }

            // orange div (ì™¼ìª½/ì˜¤ë¥¸ìª½ ë²½ ë³´ì •)
            if (oX <= 0) {
                oX = 0;
                dX_yo *= -1;
            }
            if (oX + divWidth >= winW) {
                oX = winW - divWidth;
                dX_yo *= -1;
            }

            y.style.left = yX + 'px';
            o.style.left = oX + 'px';

            requestAnimationFrame(moveYO);
        }
        moveYO();

        // í”Œë ˆì´ì–´(red) ì´ë™ (xì¶•ë§Œ, ë¸Œë¼ìš°ì € ì˜¤ë²„í”Œë¡œìš° ë°©ì§€)
        let keys = {};
        a.addEventListener('keydown', function(e) { keys[e.key] = true; });
        a.addEventListener('keyup', function(e) { keys[e.key] = false; });

        setInterval(function() {
            let left = parseInt(a.style.left, 10);
            const aWidth = parseInt(a.style.width, 10);
            const winW = window.innerWidth;
            const moveStep = 20; // ë¹ ë¥¸ ì´ë™

            // xì¶• ì´ë™ë§Œ í—ˆìš©
            if (keys['ArrowLeft']) {
                let newLeft = left - moveStep;
                if (newLeft < 0) newLeft = 0;
                a.style.left = newLeft + 'px';
            }
            if (keys['ArrowRight']) {
                let newLeft = left + moveStep;
                if (newLeft + aWidth > winW) newLeft = winW - aWidth;
                a.style.left = newLeft + 'px';
            }
            // yì¶• ì´ë™ì€ ì œê±°ë¨!
        }, 500 / 60);

        // ê³µ(ball) ìƒì„± ë° ìŠ¤íƒ€ì¼ (ì •ê°€ìš´ë°ì—ì„œ ì‹œì‘)
        let ball = document.createElement('div');
        ball.style.width = '50px';
        ball.style.height = '50px';
        ball.style.backgroundColor = 'blue';
        ball.style.borderRadius = '50%';
        ball.style.position = 'absolute';

        let ballSize = 50;
        let ballX = window.innerWidth / 2 - ballSize / 2;
        let ballY = window.innerHeight / 2 - ballSize / 2;
        ball.style.left = ballX + 'px';
        ball.style.top = ballY + 'px';

        document.body.appendChild(ball);

        // ê³µì˜ ì†ë„(ì‹œì‘ì€ ëŠë¦¬ê²Œ)
        let ballDX = 5, ballDY = 6;

        // ê²Œì„ ìƒíƒœ í”Œë˜ê·¸
        let inPlay = true;

        // black div ìë™ ì´ë™(ê³µì˜ xì¢Œí‘œë¥¼ ë”°ë¼ê°)
        function moveBlack() {
            const blackWidth = parseInt(black.style.width, 10);
            const winW = window.innerWidth;
            let targetX = ballX + ballSize / 2 - blackWidth / 2;
            if (targetX < 0) targetX = 0;
            if (targetX + blackWidth > winW) targetX = winW - blackWidth;
            black.style.left = targetX + 'px';

            requestAnimationFrame(moveBlack);
        }
        moveBlack();

        function isColliding(el1, el2) {
            const r1 = el1.getBoundingClientRect();
            const r2 = el2.getBoundingClientRect();
            return !(
                r1.right < r2.left ||
                r1.left > r2.right ||
                r1.bottom < r2.top ||
                r1.top > r2.bottom
            );
        }

        // ê³µ ì†ë„ ì¦ê°€ í•¨ìˆ˜
        function increaseBallSpeed() {
            // ì†ë„ì˜ ë°©í–¥ì€ ìœ ì§€, í¬ê¸°ë§Œ ì¦ê°€ (ìµœëŒ€ì¹˜ ì œí•œ ê°€ëŠ¥)
            let maxSpeed = 25;
            let speedUp = 1.15; // 15%ì”© ì¦ê°€
            let newDX = Math.abs(ballDX) * speedUp;
            let newDY = Math.abs(ballDY) * speedUp;
            if (newDX > maxSpeed) newDX = maxSpeed;
            if (newDY > maxSpeed) newDY = maxSpeed;
            ballDX = (ballDX > 0 ? 1 : -1) * newDX;
            ballDY = (ballDY > 0 ? 1 : -1) * newDY;
        }

        // ê²Œì„ ë¦¬ì…‹ í•¨ìˆ˜ (ì ìˆ˜ íšë“ í›„)
        function resetGame() {
            ballX = window.innerWidth / 2 - ballSize / 2;
            ballY = window.innerHeight / 2 - ballSize / 2;
            // ë°©í–¥ ëœë¤, ì†ë„ëŠ” ë‹¤ì‹œ ëŠë¦¬ê²Œ
            let startDX = 5, startDY = 6;
            ballDX = (Math.random() > 0.5 ? 1 : -1) * startDX;
            ballDY = (Math.random() > 0.5 ? 1 : -1) * startDY;
            // red div xì¶• ì •ê°€ìš´ë°ë¡œ ë¦¬ì…‹
            a.style.left = (window.innerWidth / 2 - parseInt(a.style.width, 10) / 2) + 'px';
            a.style.top = (window.innerHeight - 100) + 'px';
            black.style.left = (window.innerWidth / 2 - parseInt(black.style.width, 10) / 2) + 'px';
            black.style.top = '50px';
            inPlay = true;
            requestAnimationFrame(moveBall);
        }

        function moveBall() {
            if (!inPlay) return;

            const winW = window.innerWidth;
            const winH = window.innerHeight;

            ballX += ballDX;
            ballY += ballDY;

            if (ballY <= 0) {
                redScore++;
                updateScore();
                inPlay = false;
                setTimeout(function() {
                    alert('ğŸŸ¥ Red ìŠ¹ë¦¬!');
                    resetGame();
                }, 10);
                return;
            }
            if (ballY + ballSize >= winH) {
                blackScore++;
                updateScore();
                inPlay = false;
                setTimeout(function() {
                    alert('â¬› Black ìŠ¹ë¦¬!');
                    resetGame();
                }, 10);
                return;
            }

            if (ballX <= 0) {
                ballX = 0;
                ballDX *= -1;
            }
            if (ballX + ballSize >= winW) {
                ballX = winW - ballSize;
                ballDX *= -1;
            }

            // í”Œë ˆì´ì–´(a, red)ì™€ black div(ì»´í“¨í„°)ì™€ì˜ ëŒ€ê²° ì¶©ëŒ ì²˜ë¦¬
            [a, black].forEach(div => {
                if (isColliding(ball, div)) {
                    const ballRect = ball.getBoundingClientRect();
                    const divRect = div.getBoundingClientRect();
                    // red div(í”Œë ˆì´ì–´)ì—ì„œ ìœ„ë¡œ íŠ•ê¹€
                    if (div === a && ballRect.bottom - ballDY <= divRect.top) {
                        ballDY = -Math.abs(ballDY);
                        ballY = divRect.top - ballSize - (ballRect.top - ballY);
                        increaseBallSpeed(); // ì†ë„ ì¦ê°€!
                    }
                    // black div(ì»´í“¨í„°)ì—ì„œ ì•„ë˜ë¡œ íŠ•ê¹€
                    else if (div === black && ballRect.top - ballDY >= divRect.bottom) {
                        ballDY = Math.abs(ballDY);
                        ballY = divRect.bottom - (ballRect.top - ballY);
                        increaseBallSpeed(); // ì†ë„ ì¦ê°€!
                    }
                    // ì˜†ì—ì„œ ë¶€ë”ªíŒ ê²½ìš° (ì˜µì…˜)
                    else if (ballRect.right - ballDX <= divRect.left) {
                        ballDX = -Math.abs(ballDX);
                        ballX = divRect.left - ballSize - (ballRect.left - ballX);
                    }
                    else if (ballRect.left - ballDX >= divRect.right) {
                        ballDX = Math.abs(ballDX);
                        ballX = divRect.right - (ballRect.left - ballX);
                    }
                }
            });

            [b, g, y, o].forEach(div => {
                if (isColliding(ball, div)) {
                    const ballRect = ball.getBoundingClientRect();
                    const divRect = div.getBoundingClientRect();
                    if (ballRect.bottom - ballDY <= divRect.top) {
                        ballDY = -Math.abs(ballDY);
                        ballY = divRect.top - ballSize - (ballRect.top - ballY);
                    } else if (ballRect.top - ballDY >= divRect.bottom) {
                        ballDY = Math.abs(ballDY);
                        ballY = divRect.bottom - (ballRect.top - ballY);
                    } else if (ballRect.right - ballDX <= divRect.left) {
                        ballDX = -Math.abs(ballDX);
                        ballX = divRect.left - ballSize - (ballRect.left - ballX);
                    } else if (ballRect.left - ballDX >= divRect.right) {
                        ballDX = Math.abs(ballDX);
                        ballX = divRect.right - (ballRect.left - ballX);
                    }
                }
            });

            ball.style.left = ballX + 'px';
            ball.style.top = ballY + 'px';

            requestAnimationFrame(moveBall);
        }

        moveBall();

    </script>

</body>
</html>
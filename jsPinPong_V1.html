<!DOCTYPE html>
<html lang="ko" class="notranslate" translate="no">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="google" content="notranslate">
</head>
<body>
<script>
    // localStorageì—ì„œ ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
    function loadScores() {
        let red = parseInt(localStorage.getItem('redScore'), 10);
        let black = parseInt(localStorage.getItem('blackScore'), 10);
        if (isNaN(red)) red = 0;
        if (isNaN(black)) black = 0;
        return { red, black };
    }

    // localStorageì— ì ìˆ˜ ì €ì¥
    function saveScores(red, black) {
        localStorage.setItem('redScore', red);
        localStorage.setItem('blackScore', black);
    }

    // ì ìˆ˜ ë³€ìˆ˜ (ì´ˆê¸°í™”)
    let { red: redScore, black: blackScore } = loadScores();

    // ì ìˆ˜íŒ(scoreBoard) ìƒì„± ë° ìŠ¤íƒ€ì¼
    let scoreBoard = document.createElement('div');
    scoreBoard.style.position = 'fixed';
    scoreBoard.style.top = '10px';
    scoreBoard.style.left = '50%';
    scoreBoard.style.transform = 'translateX(-50%)';
    scoreBoard.style.fontSize = '2em';
    scoreBoard.style.fontWeight = 'bold';
    scoreBoard.style.color = '#222';
    scoreBoard.style.background = 'rgba(255,255,255,0.8)';
    scoreBoard.style.padding = '10px 30px';
    scoreBoard.style.borderRadius = '15px';
    scoreBoard.style.zIndex = 1000;
    document.body.appendChild(scoreBoard);

    // ì ìˆ˜íŒ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateScore() {
        scoreBoard.innerHTML = `ğŸŸ¥ Red: ${redScore} &nbsp;&nbsp;|&nbsp;&nbsp; â¬› Black: ${blackScore}`;
        saveScores(redScore, blackScore); // ì ìˆ˜ ë³€ê²½ì‹œë§ˆë‹¤ ì €ì¥
    }
    updateScore();

    // ì¹´ìš´íŠ¸ë‹¤ìš´ UI ìƒì„±
    let countdownDiv = document.createElement('div');
    countdownDiv.style.position = 'fixed';
    countdownDiv.style.top = '50%';
    countdownDiv.style.left = '50%';
    countdownDiv.style.transform = 'translate(-50%, -50%)';
    countdownDiv.style.fontSize = '8em';
    countdownDiv.style.fontWeight = 'bold';
    countdownDiv.style.color = '#fff';
    countdownDiv.style.background = 'rgba(0,0,0,0.7)';
    countdownDiv.style.padding = '40px 80px';
    countdownDiv.style.borderRadius = '30px';
    countdownDiv.style.zIndex = 2000;
    countdownDiv.style.textAlign = 'center';
    countdownDiv.style.userSelect = 'none';
    document.body.appendChild(countdownDiv);

    // ê²½ê¸° ì‹œì‘ í”Œë˜ê·¸
    let gameStarted = false;

    // í”Œë ˆì´ì–´ div ìƒì„± ë° ìŠ¤íƒ€ì¼ (red)
    let a = document.createElement('div');
    a.style.width = '300px';
    a.style.height = '10px';
    a.style.border = '1px solid black';
    a.style.backgroundColor = 'red';
    a.style.position = 'absolute';
    a.style.left = (window.innerWidth / 2 - 150) + 'px';
    a.style.top = '900px';
    a.tabIndex = 0;
    document.body.appendChild(a);
    a.focus();

    // ì»´í“¨í„° div ìƒì„± ë° ìŠ¤íƒ€ì¼ (black)
    let black = document.createElement('div');
    black.style.width = '400px';
    black.style.height = '10px';
    black.style.border = '1px solid black';
    black.style.backgroundColor = 'black';
    black.style.position = 'absolute';
    black.style.left = '200px';
    black.style.top = '50px';
    document.body.appendChild(black);

    // blue div(b) ìƒì„± ë° ìŠ¤íƒ€ì¼
    let b = document.createElement('div');
    b.style.width = '300px';
    b.style.height = '10px';
    b.style.border = '1px solid black';
    b.style.backgroundColor = 'blue';
    b.style.position = 'absolute';
    b.style.left = '0px';
    b.style.top = '200px';
    document.body.appendChild(b);

    // green div(g) ìƒì„± ë° ìŠ¤íƒ€ì¼
    let g = document.createElement('div');
    g.style.width = '300px';
    g.style.height = '10px';
    g.style.border = '1px solid black';
    g.style.backgroundColor = 'green';
    g.style.position = 'absolute';
    const divWidth = 300;
    g.style.left = (window.innerWidth - divWidth) + 'px';
    g.style.top = '350px';
    document.body.appendChild(g);

    // yellow div(y) ìƒì„± ë° ìŠ¤íƒ€ì¼
    let y = document.createElement('div');
    y.style.width = '300px';
    y.style.height = '10px';
    y.style.border = '1px solid black';
    y.style.backgroundColor = 'yellow';
    y.style.position = 'absolute';
    y.style.left = '0px';
    y.style.top = '500px';
    document.body.appendChild(y);

    // orange div(o) ìƒì„± ë° ìŠ¤íƒ€ì¼
    let o = document.createElement('div');
    o.style.width = '300px';
    o.style.height = '10px';
    o.style.border = '1px solid black';
    o.style.backgroundColor = 'orange';
    o.style.position = 'absolute';
    o.style.left = (window.innerWidth - divWidth) + 'px';
    o.style.top = '650px';
    document.body.appendChild(o);

    // ê° divì˜ ìœ„ì¹˜ ë³€ìˆ˜
    let bX = 0;
    let gX = window.innerWidth - divWidth;
    let yX = 0;
    let oX = window.innerWidth - divWidth;

    // blue-green ìŒ ì´ë™ ì†ë„
    let dXbg = 4;

    // yellow-orange ìŒ ì´ë™ ì†ë„ (ìˆ˜ì •: ê°ê° ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬)
    let dXy = 6;   // yellow
    let dXo = -6;  // orange

    // blue-green ìŒ ì´ë™
    function moveBG() {
        const winW = window.innerWidth;
        bX += dXbg;
        gX -= dXbg;

        if (bX <= 0) {
            bX = 0;
            dXbg *= -1;
        }
        if (bX + divWidth >= winW) {
            bX = winW - divWidth;
            dXbg *= -1;
        }

        b.style.left = bX + 'px';
        g.style.left = gX + 'px';

        requestAnimationFrame(moveBG);
    }
    moveBG();

    // yellow-orange ìŒ ì´ë™ (ìˆ˜ì •: ê°ê° ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬)
    function moveYO() {
        const winW = window.innerWidth;
        yX += dXy;
        oX += dXo;

        // yellow div (ì™¼ìª½/ì˜¤ë¥¸ìª½ ë²½ ë³´ì •)
        if (yX <= 0) {
            yX = 0;
            dXy *= -1;
        }
        if (yX + divWidth >= winW) {
            yX = winW - divWidth;
            dXy *= -1;
        }

        // orange div (ì™¼ìª½/ì˜¤ë¥¸ìª½ ë²½ ë³´ì •)
        if (oX <= 0) {
            oX = 0;
            dXo *= -1;
        }
        if (oX + divWidth >= winW) {
            oX = winW - divWidth;
            dXo *= -1;
        }

        y.style.left = yX + 'px';
        o.style.left = oX + 'px';

        requestAnimationFrame(moveYO);
    }
    moveYO();

    // í”Œë ˆì´ì–´(red) ë§ˆìš°ìŠ¤ ì´ë™ (í‚¤ë³´ë“œ ëŒ€ì‹ )
    document.addEventListener('mousemove', function(e) {
        const aWidth = parseInt(a.style.width, 10);
        const winW = window.innerWidth;
        let newLeft = e.clientX - aWidth / 2;
        if (newLeft < 0) newLeft = 0;
        if (newLeft + aWidth > winW) newLeft = winW - aWidth;
        a.style.left = newLeft + 'px';
    });

    // ê³µ(ball) ìƒì„± ë° ìŠ¤íƒ€ì¼ (ì •ê°€ìš´ë°ì—ì„œ ì‹œì‘)
    let ball = document.createElement('div');
    ball.style.width = '50px';
    ball.style.height = '50px';
    ball.style.backgroundColor = 'blue';
    ball.style.borderRadius = '50%';
    ball.style.position = 'absolute';

    let ballSize = 50;
    let ballX = window.innerWidth / 2 - ballSize / 2;
    let ballY = window.innerHeight / 2 - ballSize / 2;
    ball.style.left = ballX + 'px';
    ball.style.top = ballY + 'px';

    document.body.appendChild(ball);

    // ê³µì˜ ì†ë„(ì‹œì‘ì€ ëŠë¦¬ê²Œ)
    let ballDX = 5, ballDY = 6;
    let inPlay = false; // ê²½ê¸° ì‹œì‘ ì „ê¹Œì§€ false

    // black div ìë™ ì´ë™(ê³µì˜ xì¢Œí‘œë¥¼ ë”°ë¼ê°)
    function moveBlack() {
        const blackWidth = parseInt(black.style.width, 10);
        const winW = window.innerWidth;
        let targetX = ballX + ballSize / 2 - blackWidth / 2;
        let currentX = parseInt(black.style.left, 10);
        let speed = 24;
        if (Math.abs(targetX - currentX) < speed) {
            currentX = targetX;
        } else if (currentX < targetX) {
            currentX += speed;
        } else if (currentX > targetX) {
            currentX -= speed;
        }
        if (currentX < 0) currentX = 0;
        if (currentX + blackWidth > winW) currentX = winW - blackWidth;
        black.style.left = currentX + 'px';

        requestAnimationFrame(moveBlack);
    }
    moveBlack();

    function isColliding(el1, el2) {
        const r1 = el1.getBoundingClientRect();
        const r2 = el2.getBoundingClientRect();
        return !(
            r1.right < r2.left ||
            r1.left > r2.right ||
            r1.bottom < r2.top ||
            r1.top > r2.bottom
        );
    }

    function increaseBallSpeed(factor = 1.15) {
        let maxSpeed = 25;
        let newDX = Math.abs(ballDX) * factor;
        let newDY = Math.abs(ballDY) * factor;
        if (newDX > maxSpeed) newDX = maxSpeed;
        if (newDY > maxSpeed) newDY = maxSpeed;
        ballDX = (ballDX > 0 ? 1 : -1) * newDX;
        ballDY = (ballDY > 0 ? 1 : -1) * newDY;
    }

    function resetGame() {
        ballX = window.innerWidth / 2 - ballSize / 2;
        ballY = window.innerHeight / 2 - ballSize / 2;
        let startDX = 5, startDY = 6;
        ballDX = (Math.random() > 0.5 ? 1 : -1) * startDX;
        ballDY = (Math.random() > 0.5 ? 1 : -1) * startDY;
        a.style.left = (window.innerWidth / 2 - parseInt(a.style.width, 10) / 2) + 'px';
        a.style.top = (window.innerHeight - 100) + 'px';
        black.style.left = (window.innerWidth / 2 - parseInt(black.style.width, 10) / 2) + 'px';
        black.style.top = '50px';
        dXy = 6;
        dXo = -6;
        yX = 0;
        oX = window.innerWidth - divWidth;
        inPlay = false;
        // ì¹´ìš´íŠ¸ë‹¤ìš´ í›„ ë‹¤ì‹œ ì‹œì‘
        startCountdown();
    }

    function moveBall() {
        if (!inPlay) return;

        const winW = window.innerWidth;
        const winH = window.innerHeight;

        ballX += ballDX;
        ballY += ballDY;

        if (ballY <= 0) {
            redScore++;
            updateScore();
            inPlay = false;
            setTimeout(function() {
                alert('ğŸŸ¥ Red ìŠ¹ë¦¬!');
                resetGame();
            }, 10);
            return;
        }
        if (ballY + ballSize >= winH) {
            blackScore++;
            updateScore();
            inPlay = false;
            setTimeout(function() {
                alert('â¬› Black ìŠ¹ë¦¬!');
                resetGame();
            }, 10);
            return;
        }

        if (ballX <= 0) {
            ballX = 0;
            ballDX *= -1;
        }
        if (ballX + ballSize >= winW) {
            ballX = winW - ballSize;
            ballDX *= -1;
        }

        [a, black].forEach(div => {
            if (isColliding(ball, div)) {
                const ballRect = ball.getBoundingClientRect();
                const divRect = div.getBoundingClientRect();
                if (div === a && ballRect.bottom - ballDY <= divRect.top) {
                    ballDY = -Math.abs(ballDY);
                    ballY = divRect.top - ballSize - (ballRect.top - ballY);
                    increaseBallSpeed(1.05);
                }
                else if (div === black && ballRect.top - ballDY >= divRect.bottom) {
                    ballDY = Math.abs(ballDY);
                    ballY = divRect.bottom - (ballRect.top - ballY);
                    increaseBallSpeed(1.10);
                }
                else if (ballRect.right - ballDX <= divRect.left) {
                    ballDX = -Math.abs(ballDX);
                    ballX = divRect.left - ballSize - (ballRect.left - ballX);
                }
                else if (ballRect.left - ballDX >= divRect.right) {
                    ballDX = Math.abs(ballDX);
                    ballX = divRect.right - (ballRect.left - ballX);
                }
            }
        });

        [b, g, y, o].forEach(div => {
            if (isColliding(ball, div)) {
                const ballRect = ball.getBoundingClientRect();
                const divRect = div.getBoundingClientRect();
                if (ballRect.bottom - ballDY <= divRect.top) {
                    ballDY = -Math.abs(ballDY);
                    ballY = divRect.top - ballSize - (ballRect.top - ballY);
                } else if (ballRect.top - ballDY >= divRect.bottom) {
                    ballDY = Math.abs(ballDY);
                    ballY = divRect.bottom - (ballRect.top - ballY);
                } else if (ballRect.right - ballDX <= divRect.left) {
                    ballDX = -Math.abs(ballDX);
                    ballX = divRect.left - ballSize - (ballRect.left - ballX);
                } else if (ballRect.left - ballDX >= divRect.right) {
                    ballDX = Math.abs(ballDX);
                    ballX = divRect.right - (ballRect.left - ballX);
                }
            }
        });

        ball.style.left = ballX + 'px';
        ball.style.top = ballY + 'px';

        requestAnimationFrame(moveBall);
    }

    // ì¹´ìš´íŠ¸ë‹¤ìš´ í•¨ìˆ˜
    function startCountdown() {
        let count = 3;
        countdownDiv.innerText = count;
        countdownDiv.style.display = 'block';
        let interval = setInterval(() => {
            count--;
            if (count > 0) {
                countdownDiv.innerText = count;
            } else if (count === 0) {
                countdownDiv.innerText = 'ì‹œì‘!';
            } else {
                clearInterval(interval);
                countdownDiv.style.display = 'none';
                inPlay = true;
                requestAnimationFrame(moveBall);
            }
        }, 1000);
    }

    // ìµœì´ˆ 3,2,1 ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
    startCountdown();

</script>
</body>
</html>
